%%{init: {
  'theme': 'base',
  'themeVariables': {
    'primaryColor': '#E0F2F1',
    'primaryTextColor': '#004D40',
    'primaryBorderColor': '#00796B',
    'lineColor': '#00796B',
    'secondaryColor': '#FFF3E0',
    'tertiaryColor': '#F1F8E9'
  }
}}%%

flowchart TB
    classDef default fill:#fff,stroke:#00796B,stroke-width:2px,rx:5,ry:5;
    classDef coordinator fill:#E0F2F1,stroke:#00796B,stroke-width:3px,rx:10,ry:10;
    classDef intent fill:#B2DFDB,stroke:#00796B,stroke-width:2px;
    classDef delegate fill:#FFF3E0,stroke:#FF8F00,stroke-width:2px,rx:8,ry:8;
    classDef llm fill:#E8EAF6,stroke:#3F51B5,stroke-width:2px,rx:5,ry:5;
    classDef api fill:#FCE4EC,stroke:#C2185B,stroke-width:2px,rx:5,ry:5;
    classDef process fill:#F1F8E9,stroke:#558B2F,stroke-width:2px,rx:5,ry:5;

    U["ğŸ‘¤ User Input"]:::default
    I["ğŸ” Intent & Entity Decoding (SLM)"]:::intent
    A["ğŸ¤– Agent Orchestration<br>(AgenticAI)"]:::coordinator
    LLM["ğŸ§  Response Generation<br>(LLM)"]:::llm

    subgraph Agents ["Domain-Specific Agents"]
        direction TB
        Plan["ğŸ“œ PlanAgent"]:::delegate
        Claims["ğŸ“ ClaimsAgent"]:::delegate
        Benefits["ğŸ’¡ BenefitsAgent"]:::delegate
        Eligibility["âœ”ï¸ EligibilityAgent"]:::delegate
        Program["ğŸ“Š ProgramAgent"]:::delegate
    end

    subgraph DataSources ["Data Sources"]
        direction TB
        PDFs["ğŸ“„ PDFs"]:::default
        Audio["ğŸ™ï¸ Audio"]:::default
        Video["ğŸ“¹ Video"]:::default
        DB["ğŸ—„ï¸ Database<br>(DAO Code)"]:::process
        API["ğŸŒ APIs"]:::api
    end

    subgraph Preprocessing ["Preprocessing"]
        OCR["ğŸ” Text Extraction<br>(OCR)"]:::process
        Transcription["ğŸ—£ï¸ Speech-to-Text"]:::process
        Metadata["ğŸ—‚ï¸ Video Metadata Extraction"]:::process
    end

    U --> I
    I --> A
    A -->|Route Query| Agents
    Agents -->|Fetch Data| DataSources
    DataSources --> Preprocessing
    Preprocessing -->|Provide Processed Data| Agents
    Agents --> LLM
    LLM -->|Generate Response| A
    A -->|Send Response| U

    style Agents fill:#FFF8E1,stroke:#FFA000,stroke-width:2px,rx:10,ry:10;
    style DataSources fill:#E0F7FA,stroke:#006064,stroke-width:2px,rx:10,ry:10;
    style Preprocessing fill:#F1F8E9,stroke:#558B2F,stroke-width:2px,rx:10,ry:10;
