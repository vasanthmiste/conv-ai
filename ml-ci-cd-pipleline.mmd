%%{init: {"theme": "base", "themeVariables": {"primaryColor": "#1f77b4", "edgeLabelBackground":"#f0f0f0", "tertiaryColor": "#ff7f0e", "fontFamily": "Arial", "fontSize": "14px"}}}%%
graph TD
    %% Post-Production Monitoring Subgraph %%
    subgraph Post-Production Monitoring
        A[🚀 Production Model Deployment] --> B[📊 Monitor Model Performance]
        B --> C[📥 Log Input Data and Predictions]
        B --> D[🔍 Detect Data Drift and Concept Drift]
        C --> E[📄 Generate Explainability Metrics]
        E --> F[📈 Visualize Explainability Reports]
        D --> G[⚠️ Trigger Alerts for Performance Degradation]
        G --> H[📧 Notify Stakeholders]
    end

    %% Retraining Pipeline Subgraph %%
    subgraph Retraining Pipeline
        A1[📂 Data Collection from Production] --> B1[🔍 Data Validation]
        B1 --> C1[📉 Analyze Drift and Performance Issues]
        C1 --> D1[🔁 Trigger Retraining]
        D1 --> E1[🛠️ Prepare Training Dataset]
        E1 --> F1[🏋️ Train New Model with Updated Data]
        F1 --> G1[🧪 Evaluate Retrained Model]
        G1 --> H1{📋 Is New Model Better?}
        H1 -->|✔ Yes| I1[🚀 Deploy Retrained Model]
        H1 -->|✖ No| J1[🗑️ Discard Retrained Model]
        I1 --> K1[📊 Update Monitoring with New Model]
    end

    %% Connections Between Subgraphs %%
    F --> A1[Feedback Loop]
    K1 --> B

